<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keuzehulp ‚Äì Vind uw priv√©jet | JetSelect</title>
    <meta name="description" content="Beantwoord 5 vragen en ontvang een persoonlijke priv√©jet aanbeveling op maat. Gratis en vrijblijvend.">
    <link rel="canonical" href="https://jetselect.nl/quiz/">
    <link rel="icon" type="image/png" href="../images/Favicon-Jetselect.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --primary: #0a0a0a;
            --accent: #FA692F;
            --accent-light: #fff3ee;
            --text: #1a1a1a;
            --muted: #888;
            --border: #e5e5e5;
            --white: #fff;
            --bg: #f8f8f8;
            --radius: 14px;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --shadow-hover: 0 10px 36px rgba(0,0,0,0.14);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ‚îÄ‚îÄ Progress bar ‚îÄ‚îÄ */
        .quiz-progress-bar {
            height: 4px;
            background: #e8e8e8;
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 100;
        }
        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        .quiz-header {
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--white);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 50;
        }
        .quiz-logo img {
            height: 36px;
            display: block;
        }
        .quiz-header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .quiz-step-label {
            font-size: 13px;
            color: var(--muted);
            font-weight: 500;
        }
        .lang-toggle {
            display: flex;
            gap: 4px;
        }
        .lang-btn {
            background: none;
            border: 1.5px solid var(--border);
            color: var(--muted);
            font-size: 11px;
            font-weight: 700;
            padding: 4px 9px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            transition: all 0.15s;
            letter-spacing: 0.05em;
        }
        .lang-btn.active {
            border-color: var(--primary);
            background: var(--primary);
            color: var(--white);
        }

        /* ‚îÄ‚îÄ Main layout ‚îÄ‚îÄ */
        .quiz-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 24px 80px;
            width: 100%;
        }

        /* ‚îÄ‚îÄ Step containers ‚îÄ‚îÄ */
        .quiz-step {
            display: none;
            width: 100%;
            max-width: 860px;
            animation: stepIn 0.35s cubic-bezier(0.16, 1, 0.3, 1) both;
        }
        .quiz-step.active { display: block; }

        @keyframes stepIn {
            from { opacity: 0; transform: translateY(18px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        .step-header { text-align: center; margin-bottom: 36px; }

        .step-number {
            display: inline-block;
            background: var(--accent-light);
            color: var(--accent);
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 4px 12px;
            border-radius: 20px;
            margin-bottom: 12px;
        }

        .step-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(22px, 3.5vw, 32px);
            font-weight: 700;
            color: var(--primary);
            line-height: 1.25;
            margin-bottom: 10px;
        }

        .step-desc {
            font-size: 15px;
            color: var(--muted);
            max-width: 520px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* ‚îÄ‚îÄ Option cards ‚îÄ‚îÄ */
        .options-grid {
            display: grid;
            gap: 16px;
        }
        .options-grid.cols-3 { grid-template-columns: repeat(3, 1fr); }
        .options-grid.cols-4 { grid-template-columns: repeat(4, 1fr); }

        .option-card {
            background: var(--white);
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 24px 20px;
            cursor: pointer;
            transition: border-color 0.2s, box-shadow 0.2s, transform 0.15s, background 0.2s;
            text-align: center;
            position: relative;
            user-select: none;
        }
        .option-card:hover {
            border-color: #ccc;
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }
        .option-card.selected {
            border-color: var(--accent);
            background: var(--accent-light);
            box-shadow: 0 4px 20px rgba(250,105,47,0.15);
        }
        .option-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: 10px; right: 12px;
            width: 22px; height: 22px;
            background: var(--accent);
            color: var(--white);
            border-radius: 50%;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 22px;
        }
        .option-icon {
            font-size: 32px;
            margin-bottom: 12px;
            display: block;
        }
        .option-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }
        .option-sub {
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 4px;
        }
        .option-detail {
            font-size: 11px;
            color: #aaa;
        }

        /* ‚îÄ‚îÄ Nav buttons ‚îÄ‚îÄ */
        .quiz-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 36px;
            width: 100%;
            max-width: 860px;
        }
        .btn-prev {
            background: none;
            border: 2px solid var(--border);
            color: var(--muted);
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: none;
        }
        .btn-prev:hover { border-color: var(--primary); color: var(--primary); }
        .btn-next {
            background: var(--primary);
            color: var(--white);
            border: none;
            padding: 14px 36px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            display: none;
        }
        .btn-next:hover { background: var(--accent); }
        .btn-next:active { transform: scale(0.98); }
        .btn-next:disabled { opacity: 0.4; cursor: not-allowed; }
        .btn-next:disabled:hover { background: var(--primary); }

        /* ‚îÄ‚îÄ Contact form ‚îÄ‚îÄ */
        .form-wrap { background: var(--white); border-radius: 20px; padding: 36px; box-shadow: var(--shadow); }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        .form-group { display: flex; flex-direction: column; gap: 6px; }
        .form-group.full { grid-column: 1 / -1; }
        .form-group label { font-size: 13px; font-weight: 600; color: var(--primary); }
        .form-group input,
        .form-group textarea {
            padding: 12px 14px;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            font-family: 'Poppins', sans-serif;
            color: var(--text);
            transition: border-color 0.2s, box-shadow 0.2s;
            background: var(--white);
            width: 100%;
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(10,10,10,0.06);
        }
        .form-group input.invalid { border-color: #e53e3e; }
        .error-msg {
            font-size: 11px;
            color: #e53e3e;
            min-height: 16px;
        }
        .btn-submit {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            margin-top: 8px;
        }
        .btn-submit:hover { background: var(--accent); }
        .btn-submit:active { transform: scale(0.99); }
        .btn-submit:disabled { opacity: 0.6; cursor: not-allowed; }

        /* ‚îÄ‚îÄ Success screen ‚îÄ‚îÄ */
        .success-screen {
            text-align: center;
            padding: 48px 24px;
        }
        .success-icon {
            width: 80px; height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            font-size: 36px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 24px;
        }
        .success-screen h2 {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            margin-bottom: 12px;
        }
        .success-screen p {
            color: var(--muted);
            font-size: 15px;
            max-width: 480px;
            margin: 0 auto 28px;
            line-height: 1.6;
        }
        .btn-restart {
            display: inline-block;
            padding: 13px 32px;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: background 0.2s;
            text-decoration: none;
        }
        .btn-restart:hover { background: var(--accent); }

        /* ‚îÄ‚îÄ Mobile ‚îÄ‚îÄ */
        @media (max-width: 700px) {
            .quiz-main { padding: 28px 16px 60px; }
            .options-grid.cols-3,
            .options-grid.cols-4 { grid-template-columns: 1fr; }
            .form-grid { grid-template-columns: 1fr; }
            .form-wrap { padding: 24px 18px; }
            .step-header { margin-bottom: 24px; }
        }
        @media (max-width: 500px) {
            .quiz-step-label { display: none; }
        }
    </style>
</head>
<body>

    <!-- Progress bar -->
    <div class="quiz-progress-bar">
        <div class="quiz-progress-fill" id="progressFill"></div>
    </div>

    <!-- Header -->
    <header class="quiz-header">
        <a href="/" class="quiz-logo">
            <img src="../images/Jetselect-logo1.jpeg" alt="JetSelect">
        </a>
        <div class="quiz-header-right">
            <span class="quiz-step-label" id="stepLabel"></span>
            <div class="lang-toggle">
                <button class="lang-btn active" data-lang="nl">NL</button>
                <button class="lang-btn" data-lang="en">EN</button>
            </div>
        </div>
    </header>

    <!-- Quiz -->
    <main class="quiz-main" id="quizMain">

        <!-- Step 1: Range -->
        <div class="quiz-step active" data-step="1">
            <div class="step-header">
                <div class="step-number" data-i18n="step_of">Stap 1 van 5</div>
                <h1 class="step-title" data-i18n="s1.title">Hoe ver moet de priv√©jet kunnen vliegen?</h1>
                <p class="step-desc" data-i18n="s1.desc">De vliegafstand bepaalt welk type jet het meest geschikt is.</p>
            </div>
            <div class="options-grid cols-3">
                <div class="option-card" data-step="1" data-value="short">
                    <span class="option-icon">‚úàÔ∏è</span>
                    <div class="option-title" data-i18n="s1.short.title">Korte afstand</div>
                    <div class="option-sub" data-i18n="s1.short.range">Tot 2.500 km</div>
                    <div class="option-detail" data-i18n="s1.short.detail">Europese bestemmingen</div>
                </div>
                <div class="option-card" data-step="1" data-value="medium">
                    <span class="option-icon">üõ©Ô∏è</span>
                    <div class="option-title" data-i18n="s1.medium.title">Middellange afstand</div>
                    <div class="option-sub" data-i18n="s1.medium.range">2.500 ‚Äì 6.000 km</div>
                    <div class="option-detail" data-i18n="s1.medium.detail">Intercontinentale vluchten</div>
                </div>
                <div class="option-card" data-step="1" data-value="long">
                    <span class="option-icon">üõ´</span>
                    <div class="option-title" data-i18n="s1.long.title">Lange afstand</div>
                    <div class="option-sub" data-i18n="s1.long.range">6.000+ km</div>
                    <div class="option-detail" data-i18n="s1.long.detail">Wereldwijde reizen</div>
                </div>
            </div>
        </div>

        <!-- Step 2: Passengers -->
        <div class="quiz-step" data-step="2">
            <div class="step-header">
                <div class="step-number" data-i18n="step_of">Stap 2 van 5</div>
                <h1 class="step-title" data-i18n="s2.title">Hoeveel personen reizen er mee?</h1>
                <p class="step-desc" data-i18n="s2.desc">Het aantal passagiers bepaalt de grootte van de jet.</p>
            </div>
            <div class="options-grid cols-3">
                <div class="option-card" data-step="2" data-value="1-5">
                    <span class="option-icon">üë§</span>
                    <div class="option-title" data-i18n="s2.small.title">1 ‚Äì 5 personen</div>
                    <div class="option-sub" data-i18n="s2.small.type">Light jets</div>
                    <div class="option-detail" data-i18n="s2.small.detail">Compact en effici√´nt</div>
                </div>
                <div class="option-card" data-step="2" data-value="6-10">
                    <span class="option-icon">üë•</span>
                    <div class="option-title" data-i18n="s2.medium.title">6 ‚Äì 10 personen</div>
                    <div class="option-sub" data-i18n="s2.medium.type">Midsize jets</div>
                    <div class="option-detail" data-i18n="s2.medium.detail">Optimale balans</div>
                </div>
                <div class="option-card" data-step="2" data-value="10+">
                    <span class="option-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                    <div class="option-title" data-i18n="s2.large.title">10+ personen</div>
                    <div class="option-sub" data-i18n="s2.large.type">Heavy jets</div>
                    <div class="option-detail" data-i18n="s2.large.detail">Ruimte en luxe</div>
                </div>
            </div>
        </div>

        <!-- Step 3: Priority -->
        <div class="quiz-step" data-step="3">
            <div class="step-header">
                <div class="step-number" data-i18n="step_of">Stap 3 van 5</div>
                <h1 class="step-title" data-i18n="s3.title">Wat is uw belangrijkste prioriteit?</h1>
                <p class="step-desc" data-i18n="s3.desc">Kies wat voor u het meest telt bij een priv√©jet.</p>
            </div>
            <div class="options-grid cols-3">
                <div class="option-card" data-step="3" data-value="luxury">
                    <span class="option-icon">üíé</span>
                    <div class="option-title" data-i18n="s3.luxury.title">Luxe & comfort</div>
                    <div class="option-sub" data-i18n="s3.luxury.sub">Premium ervaring</div>
                    <div class="option-detail" data-i18n="s3.luxury.detail">Beste voorzieningen aan boord</div>
                </div>
                <div class="option-card" data-step="3" data-value="speed">
                    <span class="option-icon">‚ö°</span>
                    <div class="option-title" data-i18n="s3.speed.title">Snelheid</div>
                    <div class="option-sub" data-i18n="s3.speed.sub">Effici√´nte reistijd</div>
                    <div class="option-detail" data-i18n="s3.speed.detail">Maximale snelheid</div>
                </div>
                <div class="option-card" data-step="3" data-value="cost">
                    <span class="option-icon">üí∞</span>
                    <div class="option-title" data-i18n="s3.cost.title">Kostenbesparing</div>
                    <div class="option-sub" data-i18n="s3.cost.sub">Beste prijs-kwaliteit</div>
                    <div class="option-detail" data-i18n="s3.cost.detail">Optimale waarde</div>
                </div>
            </div>
        </div>

        <!-- Step 4: Runway -->
        <div class="quiz-step" data-step="4">
            <div class="step-header">
                <div class="step-number" data-i18n="step_of">Stap 4 van 5</div>
                <h1 class="step-title" data-i18n="s4.title">Welke luchthavens gebruikt u?</h1>
                <p class="step-desc" data-i18n="s4.desc">Dit bepaalt welke jets technisch geschikt zijn.</p>
            </div>
            <div class="options-grid cols-3">
                <div class="option-card" data-step="4" data-value="major">
                    <span class="option-icon">üè¢</span>
                    <div class="option-title" data-i18n="s4.major.title">Grote luchthavens</div>
                    <div class="option-sub" data-i18n="s4.major.sub">AMS, LHR, CDG</div>
                    <div class="option-detail" data-i18n="s4.major.detail">Internationale hubs</div>
                </div>
                <div class="option-card" data-step="4" data-value="regional">
                    <span class="option-icon">üèôÔ∏è</span>
                    <div class="option-title" data-i18n="s4.regional.title">Regionale luchthavens</div>
                    <div class="option-sub" data-i18n="s4.regional.sub">Lelystad, Rotterdam</div>
                    <div class="option-detail" data-i18n="s4.regional.detail">Flexibele toegang</div>
                </div>
                <div class="option-card" data-step="4" data-value="remote">
                    <span class="option-icon">üèîÔ∏è</span>
                    <div class="option-title" data-i18n="s4.remote.title">Afgelegen locaties</div>
                    <div class="option-sub" data-i18n="s4.remote.sub">Korte landingsbanen</div>
                    <div class="option-detail" data-i18n="s4.remote.detail">Ongebaande paden</div>
                </div>
            </div>
        </div>

        <!-- Step 5: Budget -->
        <div class="quiz-step" data-step="5">
            <div class="step-header">
                <div class="step-number" data-i18n="step_of">Stap 5 van 5</div>
                <h1 class="step-title" data-i18n="s5.title">Wat is uw budgetklasse?</h1>
                <p class="step-desc" data-i18n="s5.desc">Uw budget helpt ons de meest geschikte jets te vinden.</p>
            </div>
            <div class="options-grid cols-4">
                <div class="option-card" data-step="5" data-value="5-10M">
                    <span class="option-icon">üíµ</span>
                    <div class="option-title">‚Ç¨5M ‚Äì ‚Ç¨10M</div>
                    <div class="option-sub" data-i18n="s5.entry.sub">Entry level</div>
                    <div class="option-detail" data-i18n="s5.entry.detail">Light jets</div>
                </div>
                <div class="option-card" data-step="5" data-value="10-25M">
                    <span class="option-icon">üí∂</span>
                    <div class="option-title">‚Ç¨10M ‚Äì ‚Ç¨25M</div>
                    <div class="option-sub" data-i18n="s5.mid.sub">Midrange</div>
                    <div class="option-detail" data-i18n="s5.mid.detail">Midsize jets</div>
                </div>
                <div class="option-card" data-step="5" data-value="25-50M">
                    <span class="option-icon">üí∑</span>
                    <div class="option-title">‚Ç¨25M ‚Äì ‚Ç¨50M</div>
                    <div class="option-sub" data-i18n="s5.premium.sub">Premium</div>
                    <div class="option-detail" data-i18n="s5.premium.detail">Heavy jets</div>
                </div>
                <div class="option-card" data-step="5" data-value="50M+">
                    <span class="option-icon">üí∏</span>
                    <div class="option-title">‚Ç¨50M+</div>
                    <div class="option-sub" data-i18n="s5.ultra.sub">Ultra premium</div>
                    <div class="option-detail" data-i18n="s5.ultra.detail">Ultra-long range</div>
                </div>
            </div>
        </div>

        <!-- Step 6: Contact form -->
        <div class="quiz-step" data-step="6">
            <div class="step-header">
                <div class="step-number" data-i18n="s6.badge">Bijna klaar</div>
                <h1 class="step-title" data-i18n="s6.title">Vul uw gegevens in</h1>
                <p class="step-desc" data-i18n="s6.desc">We nemen zo snel mogelijk contact met u op.</p>
            </div>
            <div class="form-wrap">
                <form id="contactForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="name" data-i18n="s6.name">Naam *</label>
                            <input type="text" id="name" name="name" required minlength="2" autocomplete="name">
                            <span class="error-msg" id="name-err"></span>
                        </div>
                        <div class="form-group">
                            <label for="email" data-i18n="s6.email">E-mail *</label>
                            <input type="email" id="email" name="email" required autocomplete="email">
                            <span class="error-msg" id="email-err"></span>
                        </div>
                        <div class="form-group">
                            <label for="phone" data-i18n="s6.phone">Telefoon *</label>
                            <input type="tel" id="phone" name="phone" required autocomplete="tel">
                            <span class="error-msg" id="phone-err"></span>
                        </div>
                        <div class="form-group">
                            <label for="company" data-i18n="s6.company">Bedrijf</label>
                            <input type="text" id="company" name="company" autocomplete="organization">
                            <span class="error-msg" id="company-err"></span>
                        </div>
                        <div class="form-group full">
                            <label for="message" data-i18n="s6.message">Aanvullende opmerkingen</label>
                            <textarea id="message" name="message" rows="3"></textarea>
                            <span class="error-msg" id="message-err"></span>
                        </div>
                    </div>
                    <button type="submit" class="btn-submit" id="submitBtn" data-i18n="s6.submit">Verstuur aanvraag</button>
                </form>
            </div>
        </div>

        <!-- Step 7: Success -->
        <div class="quiz-step" data-step="7">
            <div class="success-screen">
                <div class="success-icon">‚úì</div>
                <h2 data-i18n="s7.title">Bedankt voor uw aanvraag!</h2>
                <p data-i18n="s7.desc">We hebben uw gegevens ontvangen en nemen binnen 24 uur contact met u op.</p>
                <button class="btn-restart" id="restartBtn" data-i18n="s7.restart">Nieuwe selectie maken</button>
            </div>
        </div>

        <!-- Nav buttons -->
        <div class="quiz-nav" id="quizNav">
            <button class="btn-prev" id="prevBtn" data-i18n="nav.prev">‚Üê Vorige</button>
            <button class="btn-next" id="nextBtn" data-i18n="nav.next" disabled>Volgende ‚Üí</button>
        </div>

    </main>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>

    <script>
    // ‚îÄ‚îÄ Supabase ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const { createClient } = supabase;
    const sb = createClient(
        'https://qwsnxkmiubhgbhwglpgu.supabase.co',
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3c254a21pdWJoZ2Jod2dscGd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NTIzNDcsImV4cCI6MjA4NjIyODM0N30.0JUoOj0aPTGUM87sO5HQJCvWwxYWYJd6AcdCaYqLpJw'
    );

    // ‚îÄ‚îÄ Translations ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const T = {
        nl: {
            step_of: (n, t) => `Stap ${n} van 5`,
            's1.title': 'Hoe ver moet de priv√©jet kunnen vliegen?',
            's1.desc': 'De vliegafstand bepaalt welk type jet het meest geschikt is.',
            's1.short.title': 'Korte afstand', 's1.short.range': 'Tot 2.500 km', 's1.short.detail': 'Europese bestemmingen',
            's1.medium.title': 'Middellange afstand', 's1.medium.range': '2.500 ‚Äì 6.000 km', 's1.medium.detail': 'Intercontinentale vluchten',
            's1.long.title': 'Lange afstand', 's1.long.range': '6.000+ km', 's1.long.detail': 'Wereldwijde reizen',
            's2.title': 'Hoeveel personen reizen er mee?',
            's2.desc': 'Het aantal passagiers bepaalt de grootte van de jet.',
            's2.small.title': '1 ‚Äì 5 personen', 's2.small.type': 'Light jets', 's2.small.detail': 'Compact en effici√´nt',
            's2.medium.title': '6 ‚Äì 10 personen', 's2.medium.type': 'Midsize jets', 's2.medium.detail': 'Optimale balans',
            's2.large.title': '10+ personen', 's2.large.type': 'Heavy jets', 's2.large.detail': 'Ruimte en luxe',
            's3.title': 'Wat is uw belangrijkste prioriteit?',
            's3.desc': 'Kies wat voor u het meest telt bij een priv√©jet.',
            's3.luxury.title': 'Luxe & comfort', 's3.luxury.sub': 'Premium ervaring', 's3.luxury.detail': 'Beste voorzieningen aan boord',
            's3.speed.title': 'Snelheid', 's3.speed.sub': 'Effici√´nte reistijd', 's3.speed.detail': 'Maximale snelheid',
            's3.cost.title': 'Kostenbesparing', 's3.cost.sub': 'Beste prijs-kwaliteit', 's3.cost.detail': 'Optimale waarde',
            's4.title': 'Welke luchthavens gebruikt u?',
            's4.desc': 'Dit bepaalt welke jets technisch geschikt zijn.',
            's4.major.title': 'Grote luchthavens', 's4.major.sub': 'AMS, LHR, CDG', 's4.major.detail': 'Internationale hubs',
            's4.regional.title': 'Regionale luchthavens', 's4.regional.sub': 'Lelystad, Rotterdam', 's4.regional.detail': 'Flexibele toegang',
            's4.remote.title': 'Afgelegen locaties', 's4.remote.sub': 'Korte landingsbanen', 's4.remote.detail': 'Ongebaande paden',
            's5.title': 'Wat is uw budgetklasse?',
            's5.desc': 'Uw budget helpt ons de meest geschikte jets te vinden.',
            's5.entry.sub': 'Entry level', 's5.entry.detail': 'Light jets',
            's5.mid.sub': 'Midrange', 's5.mid.detail': 'Midsize jets',
            's5.premium.sub': 'Premium', 's5.premium.detail': 'Heavy jets',
            's5.ultra.sub': 'Ultra premium', 's5.ultra.detail': 'Ultra-long range',
            's6.badge': 'Bijna klaar',
            's6.title': 'Vul uw gegevens in',
            's6.desc': 'We nemen zo snel mogelijk contact met u op.',
            's6.name': 'Naam *', 's6.email': 'E-mail *', 's6.phone': 'Telefoon *',
            's6.company': 'Bedrijf', 's6.message': 'Aanvullende opmerkingen',
            's6.submit': 'Verstuur aanvraag',
            's7.title': 'Bedankt voor uw aanvraag!',
            's7.desc': 'We hebben uw gegevens ontvangen en nemen binnen 24 uur contact met u op.',
            's7.restart': 'Nieuwe selectie maken',
            'nav.prev': '‚Üê Vorige', 'nav.next': 'Volgende ‚Üí',
            'err.required': 'Dit veld is verplicht',
            'err.email': 'Voer een geldig e-mailadres in',
            'err.minlength': n => `Minimaal ${n} tekens`,
        },
        en: {
            step_of: (n, t) => `Step ${n} of 5`,
            's1.title': 'How far should the private jet fly?',
            's1.desc': 'The flight range determines which type of jet is most suitable.',
            's1.short.title': 'Short range', 's1.short.range': 'Up to 2,500 km', 's1.short.detail': 'European destinations',
            's1.medium.title': 'Medium range', 's1.medium.range': '2,500 ‚Äì 6,000 km', 's1.medium.detail': 'Intercontinental flights',
            's1.long.title': 'Long range', 's1.long.range': '6,000+ km', 's1.long.detail': 'Worldwide travel',
            's2.title': 'How many passengers will travel?',
            's2.desc': 'The number of passengers determines the size of the jet.',
            's2.small.title': '1 ‚Äì 5 persons', 's2.small.type': 'Light jets', 's2.small.detail': 'Compact and efficient',
            's2.medium.title': '6 ‚Äì 10 persons', 's2.medium.type': 'Midsize jets', 's2.medium.detail': 'Optimal balance',
            's2.large.title': '10+ persons', 's2.large.type': 'Heavy jets', 's2.large.detail': 'Space and luxury',
            's3.title': 'What is your main priority?',
            's3.desc': 'Choose what matters most to you in a private jet.',
            's3.luxury.title': 'Luxury & comfort', 's3.luxury.sub': 'Premium experience', 's3.luxury.detail': 'Best onboard amenities',
            's3.speed.title': 'Speed', 's3.speed.sub': 'Efficient travel time', 's3.speed.detail': 'Maximum speed',
            's3.cost.title': 'Cost efficiency', 's3.cost.sub': 'Best value', 's3.cost.detail': 'Optimal value',
            's4.title': 'Which airports do you use?',
            's4.desc': 'This determines which jets are technically suitable.',
            's4.major.title': 'Major airports', 's4.major.sub': 'AMS, LHR, CDG', 's4.major.detail': 'International hubs',
            's4.regional.title': 'Regional airports', 's4.regional.sub': 'Lelystad, Rotterdam', 's4.regional.detail': 'Flexible access',
            's4.remote.title': 'Remote locations', 's4.remote.sub': 'Short runways', 's4.remote.detail': 'Off the beaten path',
            's5.title': 'What is your budget range?',
            's5.desc': 'Your budget helps us find the most suitable jets.',
            's5.entry.sub': 'Entry level', 's5.entry.detail': 'Light jets',
            's5.mid.sub': 'Midrange', 's5.mid.detail': 'Midsize jets',
            's5.premium.sub': 'Premium', 's5.premium.detail': 'Heavy jets',
            's5.ultra.sub': 'Ultra premium', 's5.ultra.detail': 'Ultra-long range',
            's6.badge': 'Almost done',
            's6.title': 'Fill in your details',
            's6.desc': 'We will contact you as soon as possible.',
            's6.name': 'Name *', 's6.email': 'Email *', 's6.phone': 'Phone *',
            's6.company': 'Company', 's6.message': 'Additional comments',
            's6.submit': 'Submit request',
            's7.title': 'Thank you for your request!',
            's7.desc': 'We have received your details and will contact you within 24 hours.',
            's7.restart': 'Start new selection',
            'nav.prev': '‚Üê Previous', 'nav.next': 'Next ‚Üí',
            'err.required': 'This field is required',
            'err.email': 'Enter a valid email address',
            'err.minlength': n => `Minimum ${n} characters`,
        }
    };

    // ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const state = {
        step: 1,
        lang: localStorage.getItem('jetselect-lang') || 'nl',
        sel: { range: null, passengers: null, priority: null, runway: null, budget: null }
    };

    // ‚îÄ‚îÄ Lang ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function t(key, ...args) {
        const val = T[state.lang][key];
        return typeof val === 'function' ? val(...args) : (val || key);
    }

    function applyLang() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.dataset.i18n;
            if (key) el.textContent = t(key);
        });
        for (let i = 1; i <= 5; i++) {
            const badge = document.querySelector(`[data-step="${i}"] .step-number`);
            if (badge) badge.textContent = t('step_of', i, 5);
        }
        document.querySelectorAll('.lang-btn').forEach(b => {
            b.classList.toggle('active', b.dataset.lang === state.lang);
        });
    }

    // ‚îÄ‚îÄ Storage ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function saveState() {
        try { localStorage.setItem('js-quiz', JSON.stringify({ sel: state.sel, step: state.step })); } catch(e) {}
    }
    function loadState() {
        try {
            const d = JSON.parse(localStorage.getItem('js-quiz') || 'null');
            if (!d) return;
            if (d.sel) state.sel = { ...state.sel, ...d.sel };
            if (d.step >= 1 && d.step <= 5) state.step = d.step;
        } catch(e) {}
    }
    function clearState() {
        try { localStorage.removeItem('js-quiz'); } catch(e) {}
    }

    // ‚îÄ‚îÄ Progress ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function updateProgress() {
        const pct = Math.min((state.step / 5) * 100, 100);
        document.getElementById('progressFill').style.width = pct + '%';

        const stepLabelEl = document.getElementById('stepLabel');
        stepLabelEl.textContent = state.step <= 5 ? t('step_of', state.step, 5) : '';
    }

    // ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function showStep(n) {
        document.querySelectorAll('.quiz-step').forEach(el => el.classList.remove('active'));
        const el = document.querySelector(`.quiz-step[data-step="${n}"]`);
        if (el) el.classList.add('active');

        const prev = document.getElementById('prevBtn');
        const next = document.getElementById('nextBtn');
        const nav  = document.getElementById('quizNav');

        // Hide nav on form and success steps
        if (n >= 6) {
            nav.style.display = 'none';
        } else {
            nav.style.display = 'flex';
            prev.style.display = n > 1 ? 'inline-block' : 'none';
            next.style.display = 'inline-block';
            const keys = ['range','passengers','priority','runway','budget'];
            next.disabled = !state.sel[keys[n-1]];
        }

        updateProgress();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function goNext() {
        if (state.step < 5) {
            state.step++;
            saveState();
            showStep(state.step);
        } else if (state.step === 5) {
            state.step = 6;
            showStep(6);
        }
    }

    function goPrev() {
        if (state.step > 1 && state.step <= 5) {
            state.step--;
            showStep(state.step);
            restoreCards();
        }
    }

    // ‚îÄ‚îÄ Cards ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const STEP_KEYS = { 1:'range', 2:'passengers', 3:'priority', 4:'runway', 5:'budget' };

    function restoreCards() {
        Object.entries(STEP_KEYS).forEach(([stepNum, key]) => {
            const val = state.sel[key];
            if (!val) return;
            const card = document.querySelector(`.quiz-step[data-step="${stepNum}"] .option-card[data-value="${val}"]`);
            if (card) card.classList.add('selected');
        });
    }

    function handleCardClick(card) {
        const stepNum = parseInt(card.dataset.step);
        const val = card.dataset.value;
        const key = STEP_KEYS[stepNum];

        card.closest('.options-grid').querySelectorAll('.option-card')
            .forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');

        state.sel[key] = val;
        saveState();

        document.getElementById('nextBtn').disabled = false;

        if (stepNum < 5) {
            setTimeout(() => {
                state.step = stepNum + 1;
                saveState();
                showStep(state.step);
            }, 320);
        } else {
            // Budget (step 5) ‚Äî auto-advance to form
            setTimeout(() => {
                state.step = 6;
                showStep(6);
            }, 320);
        }
    }

    // ‚îÄ‚îÄ Form submission ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function validateForm() {
        let valid = true;
        const fields = [
            { id: 'name',  required: true, minlength: 2 },
            { id: 'email', required: true, type: 'email' },
            { id: 'phone', required: true }
        ];
        fields.forEach(f => {
            const el = document.getElementById(f.id);
            const err = document.getElementById(f.id + '-err');
            let msg = '';
            if (f.required && !el.value.trim()) {
                msg = t('err.required');
            } else if (f.type === 'email' && el.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(el.value)) {
                msg = t('err.email');
            } else if (f.minlength && el.value.trim().length < f.minlength) {
                msg = t('err.minlength', f.minlength);
            }
            err.textContent = msg;
            el.classList.toggle('invalid', !!msg);
            if (msg) valid = false;
        });
        return valid;
    }

    async function handleSubmit(e) {
        e.preventDefault();
        if (!validateForm()) return;

        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.textContent = state.lang === 'nl' ? 'Verzenden...' : 'Sending...';

        const data = {
            aircraft_type: state.sel.priority || null,
            passenger_count: state.sel.passengers || null,
            range: state.sel.range || null,
            budget: state.sel.budget || null,
            timeline: state.sel.runway || null,
            name: document.getElementById('name').value.trim(),
            email: document.getElementById('email').value.trim(),
            phone: document.getElementById('phone').value.trim() || null,
            company: document.getElementById('company').value.trim() || null,
            notes: document.getElementById('message').value.trim() || null,
            user_agent: navigator.userAgent,
            referrer: document.referrer || null,
            ip_address: null
        };

        try {
            const { error } = await sb.from('wizard_submissions').insert([data]);
            if (error) throw error;
            clearState();
            state.step = 7;
            showStep(7);
        } catch(err) {
            console.error(err);
            btn.disabled = false;
            btn.textContent = t('s6.submit');
            alert(state.lang === 'nl' ? 'Er is een fout opgetreden. Probeer het opnieuw.' : 'An error occurred. Please try again.');
        }
    }

    // ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function init() {
        loadState();

        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', () => handleCardClick(card));
        });

        document.getElementById('prevBtn').addEventListener('click', goPrev);
        document.getElementById('nextBtn').addEventListener('click', goNext);
        document.getElementById('contactForm').addEventListener('submit', handleSubmit);
        document.getElementById('restartBtn').addEventListener('click', () => {
            clearState();
            state.sel = { range: null, passengers: null, priority: null, runway: null, budget: null };
            state.step = 1;
            document.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('contactForm').reset();
            document.querySelectorAll('.error-msg').forEach(e => e.textContent = '');
            document.getElementById('quizNav').style.display = 'flex';
            showStep(1);
        });

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                state.lang = btn.dataset.lang;
                localStorage.setItem('jetselect-lang', state.lang);
                applyLang();
            });
        });

        applyLang();
        restoreCards();
        showStep(state.step);
    }

    init();
    </script>
</body>
</html>
