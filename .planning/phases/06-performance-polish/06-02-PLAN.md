---
phase: 06-performance-polish
plan: 02
type: execute
---

<objective>
Add subtle parallax scrolling to hero section and optimize scroll performance for premium feel.

Purpose: Create depth and luxury through subtle motion, ensuring buttery-smooth scroll performance.
Output: Hero image moves at 0.5x scroll speed for parallax depth, scroll behavior optimized for 60fps.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-performance-polish/06-01-SUMMARY.md
@.planning/codebase/CONVENTIONS.md
@improved/js/script.js
@improved/css/style.css
@improved/index.html

**Tech stack available:**
- Motion One v11 for smooth animations
- Native scroll APIs (window.scrollY, requestAnimationFrame)
- CSS transform for GPU-accelerated parallax

**Established patterns:**
- Luxury easing: cubic-bezier(0.16, 1, 0.3, 1)
- Performance-first approach: CSS transforms over position changes
- Minimal JavaScript footprint

**Constraining decisions:**
- Zero-dependency architecture: Use native APIs, no parallax libraries
- Performance target: 60fps scroll, <60KB total JS
- Subtle effects only: Luxury is restraint, not excess

**Performance context:**
- Current hero image: 60KB (Tot-5-edited-1.jpg, already optimized in Phase 9-04)
- Target: Smooth parallax without janky scrolling
</context>

<tasks>

<task type="auto">
  <name>Task 1: Hero parallax effect</name>
  <files>improved/js/script.js, improved/css/style.css</files>
  <action>
Add subtle parallax scrolling to hero background image for depth perception.

Create new method `AnimationManager.initParallax()`:
1. Select hero section element (`.hero`)
2. Use requestAnimationFrame for smooth 60fps scroll handling
3. Calculate parallax offset: `scrollY * 0.5` (half-speed creates subtle depth)
4. Apply transform: `translateY(${offset}px)` to hero image or background layer
5. Use `will-change: transform` CSS hint for GPU acceleration
6. Throttle to RAF (don't bind directly to scroll event - performance)

Implementation approach:
```javascript
initParallax() {
    const hero = document.querySelector('.hero');
    if (!hero) return;

    let ticking = false;
    const updateParallax = () => {
        const scrolled = window.scrollY;
        const offset = scrolled * 0.5;
        hero.style.transform = `translateY(${offset}px)`;
        ticking = false;
    };

    window.addEventListener('scroll', () => {
        if (!ticking) {
            requestAnimationFrame(updateParallax);
            ticking = true;
        }
    });
}
```

CSS optimization:
```css
.hero {
  will-change: transform;
  backface-visibility: hidden; /* Prevent subpixel rendering */
}
```

Call `initParallax()` in JetSelector init() or AnimationManager init().

Subtle parallax (0.5x speed) - not aggressive (0.3x too slow, 0.7x too fast for luxury aesthetic).
  </action>
  <verify>
1. Open improved/index.html, scroll down slowly
2. Hero image should move upward at half the scroll speed (subtle depth)
3. Open browser DevTools Performance tab, record scrolling
4. Check FPS stays at 60fps (no janky frames)
5. Scroll to bottom and back up - parallax should work both directions
6. No layout shift or flicker
  </verify>
  <done>
- Hero parallax effect active (0.5x scroll speed)
- Scrolling maintains 60fps with no jank
- Parallax uses GPU-accelerated transforms
- Effect is subtle and premium (not gimmicky)
- Works smoothly in both scroll directions
  </done>
</task>

<task type="auto">
  <name>Task 2: Smooth scroll polish</name>
  <files>improved/css/style.css</files>
  <action>
Add smooth scroll behavior for anchor links and optimize scroll performance.

1. Add smooth scroll to html element for native smooth scrolling on anchor links:
```css
html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px; /* Account for fixed header if any */
}
```

2. Optimize scroll performance with CSS containment on wizard sections:
```css
.step-container {
  contain: layout style paint; /* Browser optimization hint */
}
```

3. Add overscroll-behavior for iOS bounce control:
```css
body {
  overscroll-behavior-y: none; /* Prevent iOS bounce on hero parallax */
}
```

4. Ensure parallax doesn't cause layout thrashing - verify hero section has explicit height:
```css
.hero {
  height: 100vh;
  overflow: hidden; /* Prevent parallax from expanding container */
}
```

These are CSS-only optimizations that work with the parallax JavaScript from Task 1.

Note: scroll-behavior: smooth applies to anchor navigation (footer links, etc.), NOT to manual scrolling (that remains instant for better UX).
  </action>
  <verify>
1. Click any anchor link in footer (if exists) or nav - should smooth scroll
2. Manual scrolling with mouse/trackpad - should feel instant and responsive
3. Test on mobile device or responsive mode - no jank or rubber-banding issues
4. Parallax effect from Task 1 remains smooth
5. No layout shift when scrolling
  </verify>
  <done>
- Smooth scroll behavior active for anchor links
- Manual scrolling remains instant and responsive
- Scroll performance optimizations applied (containment, overscroll-behavior)
- Hero section properly constrained (no layout expansion from parallax)
- 60fps maintained across all scroll interactions
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Hero parallax works smoothly at 60fps
- [ ] Anchor links smooth scroll (if any exist in markup)
- [ ] Manual scrolling feels instant and premium
- [ ] No layout shift or jank during parallax
- [ ] DevTools Performance shows consistent 60fps
- [ ] Works smoothly on desktop and mobile viewports
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Parallax adds depth without performance cost
- Scroll behavior feels premium and polished
- No janky frames or layout thrashing
</success_criteria>

<output>
After completion, create `.planning/phases/06-performance-polish/06-02-SUMMARY.md`:

# Phase 6 Plan 2: Parallax & Smooth Scroll Summary

**[Substantive one-liner - what shipped, not "phase complete"]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `improved/js/script.js` - Description
- `improved/css/style.css` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 06-03-PLAN.md (Performance & Final Polish)
</output>
