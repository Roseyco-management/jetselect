---
phase: 05-interactive-elements
plan: 02
type: execute
---

<objective>
Implement elegant form validation with animated error states and real-time feedback.

Purpose: Guide users through the contact form with helpful validation that feels premium, not punishing.
Output: Client-side form validation with animated error messages, focus states, and success feedback.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior summaries
@.planning/phases/05-interactive-elements/05-01-SUMMARY.md
@.planning/phases/01-foundation-animation-framework/01-01-SUMMARY.md

# Key files
@improved/js/script.js
@improved/css/style.css
@improved/index.html

**Tech stack available:**
- Motion One for animations
- HTML5 form validation (required, type="email", pattern, etc.)
- Vanilla JS for custom validation logic

**Established patterns:**
- Luxury timing: cubic-bezier(0.16, 1, 0.3, 1)
- Error color: #ff4444 (defined in script.js line 958)
- Success color: #28a745 (from .success-message in CSS)
- Progressive enhancement approach

**Current form state:**
- Form in Step 6 (Contact Info): name, email, phone, company, message
- HTML5 validation attributes: required on name/email
- Submit handler: handleFormSubmit() in script.js (line 586)
- No visual error feedback currently (just browser default)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Real-time validation with animated error messages</name>
  <files>improved/js/script.js, improved/css/style.css, improved/index.html</files>
  <action>
    Implement client-side validation with elegant error states:

    **HTML changes (index.html):**
    - Add span.error-message elements after each input/textarea in Step 6 form
    - Structure: `<span class="error-message" id="name-error"></span>` (initially empty)
    - Keep existing HTML5 attributes (required, type="email")

    **CSS changes (style.css):**
    - .error-message style: color: #ff4444, font-size: 0.85rem, margin-top: 0.25rem, display: block, opacity: 0, max-height: 0, transition: all 0.3s ease
    - .error-message.show: opacity: 1, max-height: 50px (animates height + fade)
    - input.invalid, textarea.invalid: border-color: #ff4444, box-shadow: 0 0 0 3px rgba(255, 68, 68, 0.1)
    - input:focus.invalid: box-shadow stronger (0.2 opacity) for clear feedback
    - .form-group position: relative for error message positioning

    **JS changes (script.js):**
    Add validateField(field) method to JetSelector class:
    - Check field.validity.valid (HTML5 API)
    - If invalid: add .invalid class, show error message with Motion One slideDown
    - If valid: remove .invalid, hide error message with slideUp
    - Error messages: "Dit veld is verplicht" (required), "Voer een geldig e-mailadres in" (email), etc.

    Add real-time validation listeners:
    - On blur: validate field immediately
    - On input: clear error if field becomes valid (don't validate on every keystroke, just clear errors)
    - On submit: validate all fields before proceeding

    Update handleFormSubmit():
    - Validate all fields before submission
    - If any invalid, focus first error field, shake the submit button (Motion One)
    - If all valid, proceed with existing success flow

    **Motion One animations:**
    - Error appear: animate(errorMsg, { opacity: [0, 1], maxHeight: ['0px', '50px'] }, { duration: 0.3 })
    - Error disappear: animate(errorMsg, { opacity: [1, 0], maxHeight: ['50px', '0px'] }, { duration: 0.3 })
    - Submit button shake: animate(submitBtn, { x: [-10, 10, -10, 10, 0] }, { duration: 0.4 })

    **Validation rules:**
    - Name: required, min 2 characters
    - Email: required, type="email" pattern
    - Phone: optional (no validation)
    - Company: optional
    - Message: optional

    **Avoid:**
    - Don't validate on every keystroke (too aggressive)
    - Don't show errors before user interaction (validate on blur, not on focus)
    - Don't use intrusive alert() dialogs
  </action>
  <verify>
    1. Navigate to Step 6 (Contact Info form)
    2. Click submit with empty name → should show error message, shake button
    3. Type 1 character in name, blur → "Minimaal 2 tekens" error
    4. Type valid name, blur → error clears
    5. Enter invalid email "test@", blur → email error appears
    6. Complete email "test@test.com", blur → error clears
    7. Fill form completely, submit → proceeds to success screen
  </verify>
  <done>
    - Form validates on blur and submit
    - Error messages animate smoothly (slide down + fade in)
    - Invalid fields highlighted with red border + shadow
    - Submit button shakes on validation failure
    - First error field receives focus on submit failure
    - Dutch error messages match site language
  </done>
</task>

<task type="auto">
  <name>Task 2: Enhanced input focus states and completion feedback</name>
  <files>improved/css/style.css, improved/js/script.js</files>
  <action>
    Add premium focus states and completion checkmarks:

    **CSS changes (style.css):**
    - Enhanced focus state: box-shadow: 0 0 0 3px rgba(17, 90, 78, 0.15) (teal glow, not blue default)
    - Focus border-color: var(--primary) instead of default blue
    - Smooth transition: box-shadow 0.2s ease, border-color 0.2s ease
    - Add .input-valid class: subtle green checkmark icon (CSS ::after pseudo-element)
    - Checkmark: position: absolute, right: 12px, content: '✓', color: #28a745, font-size: 1.2rem

    **JS changes (script.js):**
    - On field blur: if valid AND has value, add .input-valid class
    - On field input: if empty, remove .input-valid
    - Checkmark appears with Motion One scale animation: scale(0 → 1) over 0.3s with bounce easing

    **Structure:**
    - Wrap input in .input-wrapper div (position: relative for checkmark positioning)
    - Or use existing .form-group as relative container

    **Avoid:**
    - Don't show checkmark on empty optional fields
    - Don't show checkmark while user is typing (only on blur when valid)
    - Don't interfere with password managers or autofill
  </action>
  <verify>
    1. Focus name field → teal glow appears (not blue)
    2. Type valid name, blur → green checkmark appears
    3. Clear field → checkmark disappears
    4. Fill email, blur → checkmark appears with scale animation
    5. Test across all form fields
  </verify>
  <done>
    - Focus states use brand teal color (not browser default blue)
    - Valid filled fields show green checkmark
    - Checkmark animates in with scale bounce
    - Empty optional fields don't show checkmark
    - All transitions smooth with luxury timing
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Form validation works on blur and submit
- [ ] Error messages animate smoothly (slide + fade)
- [ ] Invalid fields highlighted with red border + shadow
- [ ] Submit button shakes on validation failure
- [ ] Focus states use brand teal glow
- [ ] Valid fields show green checkmark with animation
- [ ] Dutch error messages displayed
- [ ] First error field receives focus on submit failure
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Form validation feels helpful, not punishing
- Animations enhance user experience
- No accessibility regressions (keyboard nav still works)
  </success_criteria>

<output>
After completion, create `.planning/phases/05-interactive-elements/05-02-SUMMARY.md`:

# Phase 5 Plan 2: Form Validation & Input States Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- Real-time form validation with animated error messages
- Enhanced focus states using brand teal glow
- Success checkmarks for valid fields with scale animation
- Submit button shake feedback on validation errors

## Files Created/Modified

- `improved/css/style.css` - Error states, focus glow, checkmark styling
- `improved/js/script.js` - validateField() method, blur/input listeners, enhanced handleFormSubmit()
- `improved/index.html` - Error message span elements in Step 6 form

## Decisions Made

[Validation rules, timing values, error messages]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 05-03-PLAN.md (Success screen animations)
</output>
