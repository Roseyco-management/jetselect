---
phase: 01-foundation-animation-framework
plan: 01
type: execute
---

<objective>
Establish smooth, professional animation infrastructure using Motion One library to elevate JetSelect's UI to luxury brand standards.

Purpose: Create the foundation for all future animations - step transitions, micro-interactions, scroll effects. This sets the visual quality bar for the entire site.

Output: Working AnimationManager class with Motion One integrated, smooth step transitions and card selection animations implemented.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-animation-framework/DISCOVERY.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/ARCHITECTURE.md
@.planning/codebase/CONVENTIONS.md
@improved/index.html
@improved/js/script.js
@improved/css/style.css

**Current Architecture:**
- Vanilla JavaScript (zero dependencies, 15KB)
- Two-class structure: LanguageManager, JetSelector
- 7-step wizard with manual step transitions (no animations)
- Static CSS (no current animation system)

**Tech Stack Available:**
- Motion One library (5KB, Web Animations API wrapper) - from DISCOVERY.md
- Native WAAPI as fallback
- Existing class-based architecture pattern

**Established Patterns:**
- Class initialization via `init()` method
- Event handlers with `handle` prefix (handleOptionSelect)
- DOMContentLoaded for initialization
- 4-space indentation, camelCase naming

**Constraining Decisions:**
- MUST maintain vanilla JS architecture (no frameworks)
- MUST keep total JS < 25KB (currently 15KB, Motion adds 5KB)
- MUST use Motion One (from DISCOVERY.md recommendation)
- MUST follow existing class pattern (LanguageManager, JetSelector, now AnimationManager)

**Issues Being Addressed:**
- None from previous phases (this is Phase 1)

**From DISCOVERY.md:**
- Motion One chosen for tiny footprint (5KB) and Framer Motion quality
- AnimationManager class to centralize animation logic
- Luxury brand timing curves: cubic-bezier(0.16, 1, 0.3, 1) for smooth easing
- Progressive enhancement: animations as add-on to existing functionality
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate Motion One library via CDN</name>
  <files>improved/index.html</files>
  <action>
Add Motion One CDN script before closing </body> tag (after script.js). Use version 11 from jsDelivr:

```html
<script src="https://cdn.jsdelivr.net/npm/motion@11.11.17/dist/motion.js"></script>
```

Add BEFORE the existing script.js to ensure Motion is available when our code runs. Place around line 449 (before </body>).

Do NOT use npm/build tools - CDN only to maintain zero-dependency architecture. Do NOT add package.json or node_modules.
  </action>
  <verify>
1. Open improved/index.html
2. Confirm Motion One script tag exists before script.js
3. Open browser console, type `motion` - should return object (not undefined)
4. Total page size should be ~197KB (192KB current + 5KB Motion)
  </verify>
  <done>Motion One CDN script added to HTML, loads before script.js, accessible via global `motion` object, page size increased by ~5KB only</done>
</task>

<task type="auto">
  <name>Task 2: Create AnimationManager class with luxury timing curves</name>
  <files>improved/js/script.js</files>
  <action>
Add AnimationManager class to script.js BEFORE the JetSelector class (around line 282, after translations object).

Structure:
```javascript
// ==========================================
// ANIMATION MANAGER
// ==========================================

class AnimationManager {
    constructor() {
        // Luxury brand timing curves
        this.easings = {
            smooth: 'cubic-bezier(0.16, 1, 0.3, 1)', // Framer Motion default
            snappy: 'cubic-bezier(0.4, 0, 0.2, 1)',   // Material Design
            bounce: 'cubic-bezier(0.68, -0.55, 0.27, 1.55)'
        };

        this.durations = {
            fast: 300,
            normal: 600,
            slow: 900
        };
    }

    init() {
        // Check Motion One availability
        if (typeof motion === 'undefined') {
            console.warn('Motion One not loaded - animations disabled');
            return false;
        }
        return true;
    }

    fadeIn(selector, options = {}) {
        const defaults = {
            opacity: [0, 1],
            transform: ['translateY(20px)', 'translateY(0)']
        };
        const config = {
            duration: options.duration || this.durations.normal / 1000,
            easing: options.easing || this.easings.smooth
        };
        return motion.animate(selector, defaults, config);
    }

    fadeOut(selector, options = {}) {
        const defaults = {
            opacity: [1, 0],
            transform: ['translateY(0)', 'translateY(-20px)']
        };
        const config = {
            duration: options.duration || this.durations.fast / 1000,
            easing: options.easing || this.easings.smooth
        };
        return motion.animate(selector, defaults, config);
    }

    slideIn(selector, options = {}) {
        const defaults = {
            opacity: [0, 1],
            transform: ['translateX(-30px)', 'translateX(0)']
        };
        const config = {
            duration: options.duration || this.durations.normal / 1000,
            easing: options.easing || this.easings.smooth
        };
        return motion.animate(selector, defaults, config);
    }

    scaleSelect(selector, options = {}) {
        const defaults = {
            transform: ['scale(0.95)', 'scale(1)']
        };
        const config = {
            duration: options.duration || this.durations.fast / 1000,
            easing: options.easing || this.easings.snappy
        };
        return motion.animate(selector, defaults, config);
    }
}
```

Initialize in DOMContentLoaded (around line 680):
```javascript
const animationManager = new AnimationManager();
animationManager.init();
window.animationManager = animationManager; // Make globally accessible
```

Use 4-space indentation. Follow existing naming conventions (camelCase). Add banner comment separator.
  </action>
  <verify>
1. Open browser console after page load
2. Type `window.animationManager` - should return AnimationManager instance
3. Type `animationManager.easings.smooth` - should return 'cubic-bezier(0.16, 1, 0.3, 1)'
4. No JavaScript errors in console
  </verify>
  <done>AnimationManager class exists with fadeIn/fadeOut/slideIn/scaleSelect methods, luxury timing curves defined, initialized in DOMContentLoaded, accessible globally</done>
</task>

<task type="auto">
  <name>Task 3: Apply animations to wizard step transitions and card selections</name>
  <files>improved/js/script.js</files>
  <action>
Modify JetSelector class methods to use AnimationManager:

**1. Update `showStep(stepNumber)` method (around line 425):**

Replace the simple `.active` toggle with animated transitions:

```javascript
showStep(stepNumber) {
    const steps = document.querySelectorAll('.step-container');
    const currentActive = document.querySelector('.step-container.active');

    steps.forEach((step, index) => {
        if (index + 1 === stepNumber) {
            // Fade out current step first
            if (currentActive && currentActive !== step) {
                window.animationManager.fadeOut(currentActive).finished.then(() => {
                    currentActive.classList.remove('active');
                    // Then fade in new step
                    step.classList.add('active');
                    window.animationManager.fadeIn(step);
                });
            } else {
                // First load - just fade in
                step.classList.add('active');
                window.animationManager.fadeIn(step);
            }
        }
    });

    this.updateProgress();
}
```

**2. Update `handleOptionSelect(e)` method (around line 391):**

Add scale animation when card is selected:

```javascript
handleOptionSelect(e) {
    const card = e.currentTarget;
    const step = parseInt(card.closest('.step-container').dataset.step);
    const value = card.dataset.value;

    // Visual feedback with animation
    const allCards = card.parentElement.querySelectorAll('.option-card');
    allCards.forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');

    // Animate selection
    window.animationManager.scaleSelect(card);

    // Store selection
    const stepKeys = ['range', 'passengers', 'priority', 'runway', 'budget'];
    if (stepKeys[step - 1]) {
        this.selections[stepKeys[step - 1]] = value;
    }

    // Auto-advance with delay for animation
    setTimeout(() => {
        this.nextStep();
    }, 500);
}
```

**3. Update progress bar animation in `updateProgress()` (around line 445):**

Replace instant width change with smooth animation:

```javascript
updateProgress() {
    const progressFill = document.querySelector('.progress-fill');
    const progressText = document.querySelector('.progress-text');
    const percentage = ((this.currentStep - 1) / (this.totalSteps - 1)) * 100;

    // Smooth progress bar animation
    motion.animate(progressFill,
        { width: `${percentage}%` },
        { duration: 0.6, easing: 'cubic-bezier(0.16, 1, 0.3, 1)' }
    );

    if (progressText) {
        progressText.textContent = `${Math.round(percentage)}%`;
    }
}
```

Follow existing code style (4 spaces, camelCase). Use `window.animationManager` to access the global instance. Maintain existing functionality - animations are enhancement only.

AVOID animation stacking issues: wait for fadeOut to finish before fadeIn (use `.finished.then()`). Do NOT remove console.log debugging statements that already exist.
  </action>
  <verify>
1. Open improved/index.html in browser
2. Click through wizard steps - should see smooth fade transitions between steps
3. Click option cards - should see subtle scale animation on selection
4. Watch progress bar - should animate smoothly (not jump instantly)
5. No JavaScript errors in console
6. Animations should feel smooth at 60fps (no jank or stuttering)
  </verify>
  <done>Step transitions use fadeOut → fadeIn animation sequence, option cards scale on selection, progress bar animates smoothly, all animations use luxury timing curves from AnimationManager, 60fps maintained</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Smooth animation system with Motion One library - step transitions, card selections, progress bar</what-built>
  <how-to-verify>
1. Open improved/index.html in browser (or run local server)
2. Click "Begin uw selectie" to start wizard
3. **Test step transitions:**
   - Click any option card
   - Watch for smooth fade-out of current step
   - Watch for smooth fade-in of next step
   - Transition should feel polished (not instant or jarring)
4. **Test card selection animations:**
   - Click different option cards
   - Cards should subtly scale up on click
   - Animation should feel responsive (not sluggish)
5. **Test progress bar:**
   - Progress bar should smoothly animate width changes
   - No instant jumps from 0% → 20% → 40%
6. **Check performance:**
   - Open browser DevTools → Performance tab
   - Record while clicking through wizard
   - Verify 60fps (green line should stay high)
   - No dropped frames or jank
7. **Check browser console:**
   - No JavaScript errors
   - Should see Motion One loaded successfully
8. **Verify page size:**
   - Network tab shows total JS ~20KB (15KB script.js + 5KB Motion)
   - Still fast loading (<1s on 3G)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe any issues (jank, wrong timing, errors, etc.)</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Motion One CDN script loads successfully (no 404 errors)
- [ ] AnimationManager class exists and initializes
- [ ] Step transitions use fadeOut → fadeIn animation
- [ ] Option cards scale on selection
- [ ] Progress bar animates smoothly
- [ ] No JavaScript console errors
- [ ] 60fps performance maintained (no dropped frames)
- [ ] Total JS bundle < 25KB (15KB + 5KB Motion = 20KB)
- [ ] User verification checkpoint passed
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Motion One integrated without breaking existing functionality
- Animations feel smooth and luxury-quality (not janky or cheap)
- Zero-dependency architecture maintained (CDN only, no build tools)
- Page performance not degraded (still loads fast)
- User has verified animations look and feel professional
  </success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-animation-framework/01-01-SUMMARY.md`:

---
phase: 01-foundation-animation-framework
plan: 01
type: execute
subsystem: animation
requires: []
provides:
  - Motion One library (5KB)
  - AnimationManager class
  - Luxury timing curves
  - Step transition animations
  - Card selection animations
  - Progress bar animations
affects:
  - 02-wizard-flow-polish
  - 03-premium-visual-design
  - 05-interactive-elements
  - 06-performance-polish
tags:
  - animation
  - motion-one
  - ui-polish
  - foundation
key-decisions:
  - Motion One chosen over GSAP/anime.js (5KB vs 50KB)
  - AnimationManager class pattern follows existing LanguageManager/JetSelector
  - CDN delivery maintains zero-build architecture
key-files:
  - improved/index.html
  - improved/js/script.js
tech-stack:
  added:
    - Motion One v11 (CDN)
  patterns:
    - AnimationManager singleton pattern
    - Luxury easing curves (cubic-bezier)
    - Progressive animation enhancement
---

# Phase 1 Plan 1: Animation Foundation Summary

**Motion One animation framework integrated - smooth luxury-quality step transitions and interactions established**

## Accomplishments

- Motion One library integrated via CDN (5KB bundle size)
- AnimationManager class created with luxury brand timing curves
- Step transitions now fade smoothly (fadeOut → fadeIn sequence)
- Option cards animate with subtle scale on selection
- Progress bar animates smoothly instead of jumping instantly
- 60fps performance maintained across all animations
- Total JavaScript remains under 25KB (20KB total)

## Files Created/Modified

- `improved/index.html` - Added Motion One CDN script tag
- `improved/js/script.js` - Added AnimationManager class (120 lines), modified JetSelector.showStep(), JetSelector.handleOptionSelect(), JetSelector.updateProgress()

## Decisions Made

- **Motion One over alternatives**: Chosen for tiny 5KB footprint and Framer Motion quality (vs GSAP 50KB or anime.js 9KB)
- **CDN delivery**: Maintains zero-build architecture, no package.json needed
- **AnimationManager pattern**: Follows existing class pattern (LanguageManager, JetSelector) for consistency
- **Luxury timing curves**: cubic-bezier(0.16, 1, 0.3, 1) as default for smooth, premium feel

## Issues Encountered

[Document any issues, or write "None"]

## Deviations from Plan

[Document any deviations from the original PLAN.md, or write "None"]

## Next Phase Readiness

- ✅ Animation infrastructure ready for Phase 2 (Wizard Flow Polish)
- ✅ AnimationManager methods available: fadeIn, fadeOut, slideIn, scaleSelect
- ✅ Timing curves standardized for consistent feel across future features
- ⚠️ **Note for Phase 2:** Can now add entrance animations to wizard steps, stagger card appearances, add loading states with spinners

## Performance Impact

- Page size: 192KB → 197KB (+5KB, 2.6% increase)
- JavaScript: 15KB → 20KB (+5KB Motion One)
- Load time: No noticeable degradation (<50ms difference)
- Runtime: 60fps maintained during animations
- First Contentful Paint: Unchanged (~800ms on 3G)

## Next Step

Ready for Phase 2: Wizard Flow Polish (02-01-PLAN.md) - Can now build on animation foundation to add progress indicators, loading states, entrance animations, and polished micro-interactions.

---

</output>
